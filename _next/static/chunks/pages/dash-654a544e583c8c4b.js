(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{9768:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dash",function(){return n(1116)}])},1116:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),a=n(7294),s=n(8523),o=n(1664),i=n(7536),l=function(e){var t=e.error;return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsxs)("div",{className:"rounded-md bg-red-500 p-4 text-white m-2",children:[(0,r.jsx)("span",{className:"font-bold",children:"Error: "}),t]})})},c=n(4051),u=n.n(c),d=n(8783);function f(e,t,n,r,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,a)}d.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(d.version,"/pdf.worker.js");var x=function(){var e,t=(e=u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return r=e.sent,e.next=5,p(r);case 5:return a=e.sent,e.next=8,h(a,n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){f(s,r,a,o,i,"next",e)}function i(e){f(s,r,a,o,i,"throw",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),m=function(e){return new Promise((function(t,n){try{var r=new FileReader;r.onloadend=function(){var e;return t(null===(e=r.result)||void 0===e?void 0:e.toString())},r.readAsDataURL(e)}catch(a){n(a.message)}}))},p=function(e){for(var t=";base64,",n=e.indexOf(t)+t.length,r=e.substring(n),a=window.atob(r),s=a.length,o=new Uint8Array(new ArrayBuffer(s)),i=0;i<s;i++)o[i]=a.charCodeAt(i);return o};function h(e,t){return new Promise((function(n,r){console.log(t),d.getDocument({data:e,password:t}).promise.then((function(e){for(var t=e,r=[],a=0;a<e._pdfInfo.numPages;a++)!function(e){var n,a;r.push((n=e,a=t,new Promise((function(e,t){a.getPage(n).then((function(t){t.getTextContent().then((function(t){for(var n=t.items,r="",a=0;a<n.length;a++)r+=n[a].str+" ";e(r)}))})).catch((function(e){t(e.message)}))}))))}(a+1);Promise.all(r).then((function(e){n(e)}))}),(function(e){console.error(e),r(e)}))}))}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}var v=function(e){var t=e.setPDFText,n=function(e){p(void 0),x(u[0],e.password).then((function(e){t(e)})).catch((function(e){p(e.message)}))},c=(0,a.useState)([]),u=c[0],d=c[1],f=(0,a.useState)(),m=f[0],p=f[1],h=(0,i.cI)(),g=h.register,v=h.handleSubmit,j=h.formState.errors,b=(0,a.useCallback)((function(e){d(e)}),[]),w=(0,s.uI)({onDrop:b,maxFiles:1,accept:"application/pdf"}),N=w.getRootProps,P=w.getInputProps;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:v(n),children:[(0,r.jsx)(l,{error:m}),(0,r.jsxs)("div",{className:"z-10 w-full rounded-xl bg-white p-10 sm:max-w-lg",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"mt-5 text-3xl font-bold text-indigo-600",children:"Upload Statement"}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:["Don't worry, no shady business."," ",(0,r.jsx)(o.default,{href:"https://github.com/darshkpatel/StatementX",children:(0,r.jsx)("a",{className:"text-gray-500 hover:underline",children:"It's OpenSource"})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold tracking-wide text-gray-500",children:"Password"}),(0,r.jsx)("input",y({className:"rounded-lg border border-gray-300 p-2 text-base focus:border-indigo-600 focus:outline-none",type:"password",placeholder:"PDF's Password"},g("password")))]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold tracking-wide text-gray-500",children:"Attach Document"}),j.statement&&(0,r.jsx)("span",{className:"text-sm text-red-500",children:j.statement.message}),(0,r.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,r.jsxs)("label",y({className:"group flex h-60 w-full flex-col rounded-lg border-4 border-dashed p-10 text-center"},N(),{children:[!u.length&&(0,r.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center text-center ",children:[(0,r.jsx)("div",{className:"mx-auto -mt-10 flex max-h-48 w-2/5 flex-auto",children:(0,r.jsx)("img",{className:"has-mask h-36 object-center",src:"".concat("/StatementX/","upload.svg"),alt:"upload illustration"})}),(0,r.jsxs)("p",{className:"pointer-none text-gray-500 ",children:[(0,r.jsx)("span",{className:"text-sm",children:"Drag and drop"})," files here"," ",(0,r.jsx)("br",{})," or ",(0,r.jsx)("br",{})," Click to select a file"]})]}),u&&u.map((function(e){return(0,r.jsxs)("div",{className:"text-xl text-gray-500",children:[(0,r.jsx)("span",{className:"font-bold",children:"Uploaded: "}),e.name||"Unknown Name"]},e.name)})),(0,r.jsx)("input",y({type:"file",className:"hidden"},P(),g("statement",{validate:function(){return u.length>0||"Please upload a valid file"}})))]}))})]}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:(0,r.jsx)("span",{children:"File type: pdf"})}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"mt-12 flex flex-col items-center text-center",children:(0,r.jsx)("span",{className:"relative inline-flex w-full md:w-auto",children:(0,r.jsx)("button",{onSubmit:n,type:"submit",className:"inline-flex w-full items-center justify-center rounded-full border border-transparent bg-indigo-600 px-6 py-2 text-base font-bold leading-6 text-white hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 md:w-auto",children:"Process"})})})})]})]})})};function j(e){var t=e.map((function(e){return Object.values(e).join(",")})).join("\n");return"data:text/csv;charset=utf-8,"+encodeURIComponent(["date","description","amount","type"].join(",")+"\n"+t)}var b=function(e){var t=e.data;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"flex flex-row space-x-5",children:(0,r.jsx)("a",{type:"button",href:j(t),download:"statementx-export.csv",className:"inline-flex w-full items-center justify-center rounded-full border border-transparent bg-indigo-600 px-6 py-2 text-base font-bold leading-6 text-white hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 md:w-auto hover:cursor-pointer",children:"Download CSV"})}),(0,r.jsx)("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,r.jsx)("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full",children:[(0,r.jsx)("thead",{className:"border-b bg-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"#"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Description"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Type"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Amount"})]})}),(0,r.jsx)("tbody",{children:t&&t.map((function(e,t){return(0,r.jsxs)("tr",{className:"border-b bg-white transition duration-300 ease-in-out hover:bg-gray-100",children:[(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-light text-gray-900",children:t+1}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-light text-gray-900",children:e.date}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-light text-gray-900",children:e.description}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-light capitalize text-gray-900 ".concat("credit"===e.type?"text-green-400":"text-red-400"),children:e.type}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-light text-gray-900 ",children:e.amount})]},t)}))})]})})})})]})})};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P={HDFC:function(e){var t;return Boolean(null===(t=e.match("HDFC Bank"))||void 0===t?void 0:t.length)}},S={HDFC:new RegExp(/((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.]20\d\d)(.*?)([0-9,]+\.\d\d)(.\w\w)?/g)},D={HDFC:function(e){return e.filter((function(e){return!e.match(/(Payment Due Date)/g)}))}},k={HDFC:function(e){var t=new RegExp(/((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.]20\d\d)(.*?)([0-9,]+\.\d\d)(.\w\w)?/g);return e.map((function(e){t.lastIndex=0;var n=t.exec(e);return{date:n[1].trim(),description:n[4].trim(),amount:parseFloat(n[5].trim().replace(/,/g,"")),type:7===(null===n||void 0===n?void 0:n.length)&&n[6]&&"Cr"==n[6].trim()?"credit":"debit"}}))}};function O(e){var t=e.join(" "),n=function(e){var t=!0,n=!1,r=void 0;try{for(var a,s=Object.entries(P)[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=N(a.value,2),i=o[0];if((0,o[1])(e))return i}}catch(l){n=!0,r=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}throw new Error("Unable to identify bank")}(t),r=function(e,t){if(t){var n=Array.from(e.matchAll(S[t]),(function(e){return e[0]}));return D[t](n)}return[]}(t,n);return k[n](r)}var C=function(){var e=(0,a.useState)(),t=e[0],n=e[1];return(0,a.useEffect)((function(){t&&console.log(O(t))}),[t]),(0,r.jsxs)("div",{className:"flex flex-row justify-center",children:[!t&&(0,r.jsx)(v,{setPDFText:n}),t&&(0,r.jsx)(b,{data:O(t)})]})}},4601:function(){},2767:function(){},8251:function(){},7677:function(){},7324:function(){}},function(e){e.O(0,[803,824,22,774,888,179],(function(){return t=9768,e(e.s=t);var t}));var t=e.O();_N_E=t}]);